// Global count variable
let count = 0;

// Get DOM elements
const cardInput = document.getElementById("cardInput");
const addBtn = document.getElementById("addCardBtn");
const resultDisplay = document.getElementById("result");
const historyList = document.getElementById("historyList");
const unitsDisplay = document.getElementById("unitsToBet");

// Card counting function
function cc(card) {
  if (typeof card === "number") {
    if (card >= 2 && card <= 6) {
      count += 1;
    } else if (card === 10) {
      count -= 1;
    }
  } else if (typeof card === "string") {
    if (["J", "Q", "K", "A"].includes(card)) {
      count -= 1;
    }
  }
  const decision = count > 0 ? "Bet" : "Hold";
  return `${count} ${decision}`;
}

// Calculate units to bet
function getUnits() {
  // Example logic: bet units proportional to the count
  // You can customize this as needed
  return Math.max(count, 1);
}

// Update display
function updateDisplay(card, resultText) {
  resultDisplay.textContent = resultText;

  // Add to history
  const li = document.createElement("li");
  li.textContent = `Card: ${card} â†’ ${resultText}`;
  historyList.appendChild(li);

  // Update units to bet
  const units = getUnits();
  unitsDisplay.textContent = units;
}

// Handle button click
addBtn.addEventListener("click", () => {
  const inputVal = document
    .getElementById("cardInput")
    .value.trim()
    .toUpperCase();
  if (!inputVal) return;

  // Parse input
  let cardValue;
  if (!isNaN(inputVal)) {
    cardValue = Number(inputVal);
  } else {
    cardValue = inputVal;
  }

  // Run cc function
  const result = cc(cardValue);
  updateDisplay(cardValue, result);
  // Clear input
  document.getElementById("cardInput").value = "";
});
